# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1
  # The server action timeout can be increased to a maximum of 10 minutes.
  # The default is 60s.
  timeoutSeconds: 120

# Environment variables (root level)
env:
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyBYvIGN0-Yd1b7LG2Seg6VwfKnTYIo4n_4"
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "shotanalisys.firebaseapp.com"
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "shotanalisys"
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "shotanalisys.firebasestorage.app"
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "602998191800"
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:602998191800:web:dd8a758d589b12b3c5264d"
  - variable: NEXT_PUBLIC_APP_URL
    value: "https://chaaaas.com"
  - variable: MP_WEBHOOK_URL
    value: "https://chaaaas.com/api/payments/webhook"
  - variable: MP_ACCESS_TOKEN_AR
    value: "APP_USR-3647146488744629-091106-8aeb480b57f1bbb536c0d2b1e876db05-799155933"
  - variable: GEMINI_API_KEY
    value: "AIzaSyBGVlvWqL2FZmOMvNQu8lzxcOQtbmTTEcM"
  - variable: GOOGLE_API_KEY
    value: "AIzaSyBGVlvWqL2FZmOMvNQu8lzxcOQtbmTTEcM"
  - variable: GOOGLE_GENAI_API_KEY
    value: "AIzaSyBGVlvWqL2FZmOMvNQu8lzxcOQtbmTTEcM"
  - variable: FIREBASE_ADMIN_PROJECT_ID
    value: "shotanalisys"
  - variable: FIREBASE_ADMIN_PRIVATE_KEY
    value: "-----BEGIN PRIVATE KEY-----\nTU_CLAVE_PRIVADA_AQUI\n-----END PRIVATE KEY-----\n"
  - variable: FIREBASE_ADMIN_CLIENT_EMAIL
    value: "firebase-adminsdk-xxxxx@shotanalisys.iam.gserviceaccount.com"

# Declaración explícita del backend de App Hosting
backends:
  - id: shot-analysis
    region: us-central1

# Defines a "flow" that can be deployed to Cloud Functions.
# This can be triggered via an HTTP request or any other supported
# event trigger.
# https://firebase.google.com/docs/functions
flows:
  - id: processUploadedVideo
    entryPoint: processUploadedVideo
    # By default, flows are not publicly accessible
    # https://firebase.google.com/docs/functions/securing-functions
    # We'll need to secure this in a production environment.
    allowInsecure: true
